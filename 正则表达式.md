# 正则表达式  
### 1. 什么是正则表达式  
    由普通字符(例如英文字母、数字等)和特殊字符(例如/ . 等)组成的文字模式;   
    该模式描述在查找文字主体时待匹配的一个或多个字符串；正则表达式作为一个模板，将某个字符串模式与所搜索的字符串进行匹配。  
### 2. 正则的好处  
	查找。替换。数据有效性验证。  
### 3. 创建正则表达式  
	①字面量的方式(直接量的方式) ： /表达式/   
        eg：var str=“I love js”;  
        var pattern=/js/;  
    
    ②构造函数 ： new RegExp(pattern，attribute)  *regular expression  
### 4. 正则的方法  
	test() 检索字符串中的指定值。  
    返回值为布尔型     
    
    exec() 检索字符串中的指定值。  
    返回被找到的字符串(数组的形式)，未查找到返回null  
    
    compile() 编译正则表达式  
### 5. 模式修饰符  
	i  ignoreCase  
	g  global  
	m  multiline  
### 6. 转义字符 “ \”  
	将特殊字符与普通字符相互转义。  
### 7. 方括号 用于查找某个范围内的字符  
	[abc] 查找方括号之间的任一字符；  
	[^abc] 查找任一不在方括号之间的字符；  
	[0-9]、[a-z]、[A-Z]、[A-z]  查找任一从开始到结束之间的字符；  
	(red|blue|green) 查找任一指定的选项 *()作为一个组一个整体  
	*()含有分组的正则在exec方法的输出中会依次输出‘整个正则的匹配结果’、‘从左到右每一个组的匹配结果’  
    
    *()分组可以引用，从左到右从1开始，而整个正则就是0，它们的引用方式就是\n  
### 8. 元字符 *元字符大写形式均意为非的情况  
	.  查找除了换行符和结束符的任一单个字符  
	\w  查找单词字符；  
	\d  查找数字  
	\s  查找空白字符  
	\b  匹配单词边界  
	--以下没有非的情况--  
	\0  查找null字符  
	\n  \f  \r  \t  \v  查找换行符、回车符、制表符、垂直制表符  
	\nnn  查找以八进制数nnn规定的字符  
    \xnn  查找以十六进制数nn规定的字符  
    \unnn  查找以十六进制数nnnn规定的Unicode字符  
### 9. 量词  
	n+  匹配第一个包含至少一个n的字符串  
	n*  匹配第一个包含0个或多个n的字符串  
	n?  匹配第一个包含0个或1个n的字符串  
	n{x}  匹配确定的x次  
	n{x,y}  x<=y，最少匹配x次，最多匹配y次  
	n{x,}  至少匹配x次  
	n$  匹配第一个结尾为n的字符  
	^n  匹配第一个开头为n的字符串  
	?=n  匹配第一个其后紧接指定字符串n的字符串  
    ?!n  匹配第一个其后没有紧接指定字符串n的字符串  
### 10. RegExp对象属性  
    lastIndex  返回一个整数，标示开始下一次匹配的字符位置。  
    global  对象是否具有标志 g。  
    ignoreCase  对象是否具有标志 i。  
    multiline  对象是否具有标志 m。  
    source  正则表达式的源文本。  
### 11. 支持正则表达式的string对象方法  
    search  检索与正则表达式相匹配的值  
    *只能查找是否存在，也就是只查找第一个，有没有全局匹配‘g’都没有影响  
    
	match  找到一个或多个正则表达式的匹配  
		*g会影响匹配情况，会返回所有符合表达式的字符串；  
		*全局匹配情况下，正则中的()组，将不会被返回  
        
	replace  替换与正则表达式匹配的字符串  
	split  把字符串分割为字符串数组(可以使用正则来表示分割符)  
	toString()、toLocaleString()、valueOf() 这几个继承的方法可以用在正则上。  
### 12. 捕获匹配内容的方式  
① exec返回的数组中  
② /\n/ 字面量形式下的\n中  
③ replace方法的第二个参数中  
④ RegExp.$1 构造生成的正则属性中  

* 其实多段简单正则性能会好过复杂长正则。  
* replace()方法；  
	语法 stringobject.replace(RegExp/str，replacestr/function)  
	*replace的第二个参数可以是函数，函数中会接收相应的参数：模式的匹配项、匹配项在字符串中的位置、原始字符串。当正则表达式中定义了多个捕获组的时候，接收的参数依次是：第一个捕获组的匹配项(并不是第一个组的意思，是整个正则匹配项，也就是\0组)，第二个捕获组的匹配项…最后两个参数不变。  
* ?: 非捕获分组。分组匹配的值不会被保存。  
* 非贪婪匹配  
默认状态是贪婪匹配，会尽可能多的匹配符合内容；量词后加？表示非贪婪模式。  
*（？：…）非捕获性分组  
* | 选择，匹配该符号左边或右边的内容，从左边开始匹配。  
* 分组匹配中的匹配内容可以用 \n 来引用也可以 $n 来代替。  

### 小结   
`exec`：无论全局与否，总是返回组匹配内容，总是只返回第一个匹配内容；全局匹配状态下可以从上一次匹配位置之后开始继续下一次匹配，直到没有无匹配内容时重新从字符串开头开始匹配。  

`match`：只有非全局匹配才会返回分组匹配内容。全局匹配会一次返回所有匹配内容，但是忽略组匹配内容。  

`replace`：非全局只替换第一个匹配项，全局替换所有  

`test`、search、split：全局与否没有区别  

###正则手册  
| 字符 | 描述 |  
| --- | --- |  
| \ | 将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“n”匹配字符“n”。“\n”匹配一个换行符。串行“\\”匹配“\”而“\(”则匹配“(”。 |  
| ^	| 匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置。 |  
| $	| 匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之前的位置。 |  
| *	| 匹配前面的子表达式零次或多次。例如，zo*能匹配“z”以及“zoo”。*等价于{0,}。 |  
| +	| 匹配前面的子表达式一次或多次。例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于{1,}。 |  
| ?	| 匹配前面的子表达式零次或一次。例如，“do(es)?”可以匹配“does”或“does”中的“do”。?等价于{0,1}。 |  
| {n} | n是一个非负整数。匹配确定的n次。例如，“o{2}”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个o。 |  
| {n,} | n是一个非负整数。至少匹配n次。例如，“o{2,}”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。“o{1,}”等价于“o+”。“o{0,}”则等价于“o*”。 |  
| {n,m} | m和n均为非负整数，其中n<=m。最少匹配n次且最多匹配m次。例如，“o{1,3}”将匹配“fooooood”中的前三个o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格。 |  
| ?	| 当该字符紧跟在任何一个其他限制符（*,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。 |  
| .	| 匹配除“\n”之外的任何单个字符。要匹配包括“\n”在内的任何字符，请使用像“(.|\n)”的模式。 |  
| (pattern) | 匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“\(”或“\)”。 |  
| (?:pattern) |	匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“(|)”来组合一个模式的各个部分是很有用。例如“industr(?:y|ies)”就是一个比“industry|industries”更简略的表达式。 |  
| (?=pattern) | 正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“Windows(?=95|98|NT|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。 |  
| (?!pattern) | 正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?!95|98|NT|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始 |  
| (?<=pattern) | 反向肯定预查，与正向肯定预查类拟，只是方向相反。例如，“(?<=95|98|NT|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。 |  
| (?<!pattern) | 反向否定预查，与正向否定预查类拟，只是方向相反。例如“(?<!95|98|NT|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。 |  
| x|y | 匹配x或y。例如，“z|food”能匹配“z”或“food”。“(z|f)ood”则匹配“zood”或“food”。 |  
| [xyz] | 字符集合。匹配所包含的任意一个字符。例如，“[abc]”可以匹配“plain”中的“a”。 |  
| [^xyz] | 负值字符集合。匹配未包含的任意字符。例如，“[^abc]”可以匹配“plain”中的“p”。 |  
| [a-z] | 字符范围。匹配指定范围内的任意字符。例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符。 |  
| [^a-z] | 负值字符范围。匹配任何不在指定范围内的任意字符。例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符。 |  
| \b | 匹配一个单词边界，也就是指单词和空格间的位置。例如，“er\b”可以匹配“never”中的“er”，但不能匹配“verb”中的“er”。 |  
| \B | 匹配非单词边界。“er\B”能匹配“verb”中的“er”，但不能匹配“never”中的“er”。 |  
| \cx | 匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的“c”字符。 |  
| \d | 匹配一个数字字符。等价于[0-9]。 |  
| \D | 匹配一个非数字字符。等价于[^0-9]。 |  
| \f | 匹配一个换页符。等价于\x0c和\cL。 |  
| \n | 匹配一个换行符。等价于\x0a和\cJ。 |  
| \r | 匹配一个回车符。等价于\x0d和\cM。 |  
| \s | 匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。 |  
| \S | 匹配任何非空白字符。等价于[^ \f\n\r\t\v]。 |  
| \t | 匹配一个制表符。等价于\x09和\cI。 |  
| \v | 匹配一个垂直制表符。等价于\x0b和\cK。 |  
| \w | 匹配包括下划线的任何单词字符。等价于“[A-Za-z0-9_]”。 |  
| \W | 匹配任何非单词字符。等价于“[^A-Za-z0-9_]”。 |  
| \xn | 匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“\x41”匹配“A”。“\x041”则等价于“\x04&1”。正则表达式中可以使用ASCII编码。. |  
| \num | 匹配num，其中num是一个正整数。对所获取的匹配的引用。例如，“(.)\1”匹配两个连续的相同字符。 |  
| \n | 标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。 |  
| \nm | 标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。 |  
| \nml | 如果n为八进制数字（0-3），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。 |  
| \un | 匹配n，其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（©）。 |  

### 常用正则表达式
|需求|表达式|  
| --- | --- |  
| 用户名     | /^[a-z0-9_-]{3,16}$/ |  
| 密码 | /^[a-z0-9_-]{6,18}$/ |  
| 十六进制值	 | /^#?([a-f0-9]{6}|[a-f0-9]{3})$/ |  
| 电子邮箱 | /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/|  
| 电子邮箱 | /^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.{1,2}[a-z]+)+$/ |  
| URL | /^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/ |  
| IP 地址 | /((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/ |  
| IP 地址 | /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/ |  
| HTML标签 | /^<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|\s+\/>)$/ |  
| 删除代码\\注释 | (?<!http:|\S)//.*$ |  
| Unicode编码中的汉字范围	 | /^[\u2E80-\u9FFF]+$/ |  
